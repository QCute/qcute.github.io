<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="VarKai"><title>acme.sh手动安装 ｜ 轻作</title>
<meta name=description content="官方自动安装脚本是使用&amp;ndash;install-online模式，在网络通畅的情况下是很不错的，但是国内嘛&amp;hellip; 1. 克隆仓库(或直接下载解压) git clone --depth=1 https://github.com/acmesh-official/acme.sh &amp;amp;&amp;amp; cd acme.sh # 国内使用Gitee镜像 git clone --depth=1 https://gitee.com/neilpang/acme.sh"><meta name=keywords content="Hugo,theme,graphite"><link rel=apple-touch-icon href=https://qcute.github.io/images/favicon.ico><link rel="shortcut icon bookmark" href=https://qcute.github.io/images/favicon.ico><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.0.1/remixicon.css><link rel=stylesheet type=text/css media=screen href=/css/highlight.min.css><link rel=stylesheet type=text/css media=screen href=/css/graphite.min.css></head><body><div class="main animate__animated animate__fadeInDown"><div class="nav_container animated fadeInDown"><div class=site_nav id=site_nav><ul><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/tags/>标签</a></li><li><a href=/posts/>归档</a></li><li><a href=/about/>关于</a></li><li><a href=/search/ title=搜索 id=site_search><i class=ri-search-line></i></a></li></ul></div><div class=menu_icon><a id=menu_icon><i class=ri-menu-line></i></a></div></div><div class="header animated fadeInDown"><div class=site_title_container><div class=site_title><h1><a href=https://qcute.github.io/><span><img src=https://gohugo.io/favicon.ico></span></a></h1></div><div class=description><h1 style=float:right><a><span>轻作</span></a></h1><br><br><p class=sub_title>重拾写作的乐趣</p><div class=my_socials><a href=https://github.com/QCute title=github target=_blank><i class=ri-github-fill></i></a>
<a href=https://www.zhihu.com/people/tui-fei-er-you-ya-de-shen-shi title=zhihu target=_blank><i class=ri-zhihu-fill></i></a>
<a href type=application/rss+xml title=rss target=_blank><i class=ri-rss-fill></i></a></div></div></div></div><div class=content><div class=post_page><div class="post animate__animated animate__fadeInDown"><div class="post_title post_detail_title"><h2><a href=/posts/misc/acme/>acme.sh手动安装</a></h2><span class=date>2020.03.07</span></div><div class="post_content markdown"><p>官方自动安装脚本是使用<a href=https://github.com/acmesh-official/get.acme.sh/blob/master/index.html#L49>&ndash;install-online</a>模式，在网络通畅的情况下是很不错的，但是国内嘛&mldr;</p><h1 id=1-克隆仓库或直接下载解压>1. 克隆仓库(或直接下载解压)</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git clone --depth<span class=o>=</span><span class=m>1</span> https://github.com/acmesh-official/acme.sh <span class=o>&amp;&amp;</span> <span class=nb>cd</span> acme.sh
</span></span><span class=line><span class=cl><span class=c1># 国内使用Gitee镜像</span>
</span></span><span class=line><span class=cl>git clone --depth<span class=o>=</span><span class=m>1</span> https://gitee.com/neilpang/acme.sh <span class=o>&amp;&amp;</span> <span class=nb>cd</span> acme.sh
</span></span></code></pre></div><h1 id=2-安装依赖>2. 安装依赖</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Debian/Ubuntu</span>
</span></span><span class=line><span class=cl>apt install curl wget openssl socat crontab -y
</span></span><span class=line><span class=cl><span class=c1># ReHat/CentOS 8.x以下</span>
</span></span><span class=line><span class=cl>yum install curl wget openssl socat crontab -y
</span></span><span class=line><span class=cl><span class=c1># ReHat/CentOS 8.x以上</span>
</span></span><span class=line><span class=cl>dnf install curl wget openssl socat crontab -y
</span></span></code></pre></div><h1 id=3-安装>3. 安装</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 安装</span>
</span></span><span class=line><span class=cl>./acme.sh --install
</span></span><span class=line><span class=cl><span class=c1># 注册账号</span>
</span></span><span class=line><span class=cl>acme.sh --register-account -m my@example.com
</span></span><span class=line><span class=cl><span class=c1># 删除仓库</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ../ <span class=o>&amp;&amp;</span> rm -rf ./acme.sh
</span></span></code></pre></div><p>或者指定邮箱，直接注册</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>./acme.sh --install my@example.com
</span></span><span class=line><span class=cl><span class=c1># 删除仓库</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ../ <span class=o>&amp;&amp;</span> rm -rf ./acme.sh
</span></span></code></pre></div><h1 id=4-更换acme服务器>4. 更换<a href>ACME</a>服务器</h1><p>acme.sh默认向<a href=https://zerossl.com/>zerossl</a>申请证书，但是最近申请证书时总是超时(Timeout)<br>例如选择<a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>, 需要重新向注册账号</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>acme.sh --server letsencrypt --register-account -m my@example.com
</span></span></code></pre></div><p>申请证书时, 指定服务器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>acme.sh --server letsencrypt --issue -d example.com --standalone
</span></span></code></pre></div><p>或者设置默认<a href>CA</a>服务器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>acme.sh --set-default-ca --server letsencrypt
</span></span></code></pre></div><h1 id=参考>参考</h1><blockquote><p><a href=https://github.com/acmesh-official/acme.sh/wiki>acme.sh wiki</a><br><a href=https://github.com/acmesh-official/acme.sh#supported-ca>Supported CA</a></p></blockquote><p>如果只有sudoers权限, 没有root权限或者不想安装到root目录下的情况下, 可以修改<a href>crontab</a>, 使用从stdin读取密码的<a href>sudo</a>命令, 然后在脚本上增加<a href>&ndash;force</a>选项</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=m>37</span> <span class=m>0</span> * * * /bin/echo <span class=s2>&#34;你的用户密码&#34;</span> <span class=p>|</span> /bin/sudo -S  <span class=s2>&#34;/home/m/.acme.sh&#34;</span>/acme.sh --force --cron --home <span class=s2>&#34;/home/m/.acme.sh&#34;</span> &gt; /dev/null  
</span></span></code></pre></div><h1 id=参考-1>参考</h1><blockquote><p><a href=https://github.com/acmesh-official/acme.sh/wiki/sudo>sudo</a></p></blockquote></div><div class=post_footer></div></div><div class=doc_comments><div class=comments_block_title>发表评论</div><div id=comments></div></div><style>.giscus,.giscus-frame{margin-bottom:48px}</style><script src=https://giscus.app/client.js data-repo=QCute/qcute.github.io data-repo-id=R_kgDOG-5qXQ data-category=Announcements data-category-id=DIC_kwDOG-5qXc4CSRb_ data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></div></div><a id=back_to_top href=# class=back_to_top><i class=ri-arrow-up-s-line></i></a><footer class=footer><div class=powered_by><a href=https://varkai.com>Designed by VarKai,</a>
<a href=http://www.gohugo.io/>Proudly published with Hugo</a></div><div class=footer_slogan><span>轻作、重拾写作的乐趣</span></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.1/elevator.min.js></script><script src=/js/graphite.min.js></script><script type=text/javascript id=MathJax-script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js></script><script>MathJax={options:{skipHtmlTags:["script","noscript","style","textarea","pre"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0}}</script></body></html>