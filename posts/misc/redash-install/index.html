<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="VarKai"><title>redash安装报错问题修复 ｜ 轻作</title>
<meta name=description content="执行官方安装脚本Setup, 出现以下报错 Traceback (most recent call last): File &amp;#34;/app/manage.py&amp;#34;, line 9, in &amp;lt;module&amp;gt; manager() File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 716, in __call__ return self.main(*args, **kwargs) File &amp;#34;/usr/local/lib/python2.7/site-packages/flask/cli.py&amp;#34;, line 380, in main return AppGroup.main(self, *args, **kwargs) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 696, in main rv = self.invoke(ctx) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 1060, in invoke return _process_result(sub_ctx.command.invoke(sub_ctx)) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 1060, in invoke return _process_result(sub_ctx.command.invoke(sub_ctx)) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 889, in invoke return ctx.invoke(self.callback, **ctx.params) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/core.py&amp;#34;, line 534, in invoke return callback(*args, **kwargs) File &amp;#34;/usr/local/lib/python2.7/site-packages/click/decorators.py&amp;#34;, line 17, in new_func"><meta name=keywords content="Hugo,theme,graphite"><link rel="shortcut icon" href=https://qcute.github.io/images/favicon.ico><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.0.1/remixicon.css><link rel=stylesheet type=text/css media=screen href=https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.32/fancybox/fancybox.css><link rel=stylesheet type=text/css media=screen href=/css/highlight.min.css><link rel=stylesheet type=text/css media=screen href=/css/graphite.min.css></head><body><div class="main animate__animated animate__fadeInDown"><div class="nav_container animated fadeInDown"><div class=site_nav id=site_nav><ul><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/tags/>标签</a></li><li><a href=/posts/>归档</a></li><li><a href=/about/>关于</a></li><li><a href=/search/ title=搜索 id=site_search><i class=ri-search-line></i></a></li></ul></div><div class=menu_icon><a id=menu_icon><i class=ri-menu-line></i></a></div></div><div class="header animated fadeInDown"><div class=site_title_container><div class=site_title><h1><a href=https://qcute.github.io/><span><img src=https://gohugo.io/favicon.ico></span></a></h1></div><div class=description><h1 style=float:right><a><span>轻作</span></a></h1><br><br><p class=sub_title>重拾写作的乐趣</p><div class=my_socials><a href=https://github.com/QCute title=github target=_blank><i class=ri-github-fill></i></a>
<a href=https://www.zhihu.com/people/tui-fei-er-you-ya-de-shen-shi title=zhihu target=_blank><i class=ri-zhihu-fill></i></a>
<a href type=application/rss+xml title=rss target=_blank><i class=ri-rss-fill></i></a></div></div></div></div><div class=content><div class=post_page><div class="post animate__animated animate__fadeInDown"><div class="post_title post_detail_title"><h2><a href=/posts/misc/redash-install/>redash安装报错问题修复</a></h2><span class=date>2020.03.07</span></div><div class="post_content markdown"><h2 id=执行官方安装脚本setuphttpsgithubcomgetredashsetup-出现以下报错>执行官方安装脚本<a href=https://github.com/getredash/setup/>Setup</a>, 出现以下报错</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Traceback <span class=o>(</span>most recent call last<span class=o>)</span>:
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/app/manage.py&#34;</span>, line 9, in &lt;module&gt;
</span></span><span class=line><span class=cl>    manager<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 716, in __call__
</span></span><span class=line><span class=cl>    <span class=k>return</span> self.main<span class=o>(</span>*args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/flask/cli.py&#34;</span>, line 380, in main
</span></span><span class=line><span class=cl>    <span class=k>return</span> AppGroup.main<span class=o>(</span>self, *args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 696, in main
</span></span><span class=line><span class=cl>    <span class=nv>rv</span> <span class=o>=</span> self.invoke<span class=o>(</span>ctx<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 1060, in invoke
</span></span><span class=line><span class=cl>    <span class=k>return</span> _process_result<span class=o>(</span>sub_ctx.command.invoke<span class=o>(</span>sub_ctx<span class=o>))</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 1060, in invoke
</span></span><span class=line><span class=cl>    <span class=k>return</span> _process_result<span class=o>(</span>sub_ctx.command.invoke<span class=o>(</span>sub_ctx<span class=o>))</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 889, in invoke
</span></span><span class=line><span class=cl>    <span class=k>return</span> ctx.invoke<span class=o>(</span>self.callback, **ctx.params<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 534, in invoke
</span></span><span class=line><span class=cl>    <span class=k>return</span> callback<span class=o>(</span>*args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/decorators.py&#34;</span>, line 17, in new_func
</span></span><span class=line><span class=cl>    <span class=k>return</span> f<span class=o>(</span>get_current_context<span class=o>()</span>, *args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/flask/cli.py&#34;</span>, line 257, in decorator
</span></span><span class=line><span class=cl>    <span class=k>return</span> __ctx.invoke<span class=o>(</span>f, *args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/click/core.py&#34;</span>, line 534, in invoke
</span></span><span class=line><span class=cl>    <span class=k>return</span> callback<span class=o>(</span>*args, **kwargs<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/app/redash/cli/database.py&#34;</span>, line 31, in create_tables
</span></span><span class=line><span class=cl>    db.create_all<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py&#34;</span>, line 963, in create_all
</span></span><span class=line><span class=cl>    self._execute_for_all_tables<span class=o>(</span>app, bind, <span class=s1>&#39;create_all&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py&#34;</span>, line 955, in _execute_for_all_tables
</span></span><span class=line><span class=cl>    op<span class=o>(</span><span class=nv>bind</span><span class=o>=</span>self.get_engine<span class=o>(</span>app, <span class=nb>bind</span><span class=o>)</span>, **extra<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/schema.py&#34;</span>, line 4005, in create_all
</span></span><span class=line><span class=cl>    <span class=nv>tables</span><span class=o>=</span>tables<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 1939, in _run_visitor
</span></span><span class=line><span class=cl>    with self._optional_conn_ctx_manager<span class=o>(</span>connection<span class=o>)</span> as conn:
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/contextlib.py&#34;</span>, line 17, in __enter__
</span></span><span class=line><span class=cl>    <span class=k>return</span> self.gen.next<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 1932, in _optional_conn_ctx_manager
</span></span><span class=line><span class=cl>    with self.contextual_connect<span class=o>()</span> as conn:
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 2123, in contextual_connect
</span></span><span class=line><span class=cl>    self._wrap_pool_connect<span class=o>(</span>self.pool.connect, None<span class=o>)</span>,
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 2162, in _wrap_pool_connect
</span></span><span class=line><span class=cl>    e, dialect, self<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 1476, in _handle_dbapi_exception_noconnection
</span></span><span class=line><span class=cl>    exc_info
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py&#34;</span>, line 265, in raise_from_cause
</span></span><span class=line><span class=cl>    reraise<span class=o>(</span>type<span class=o>(</span>exception<span class=o>)</span>, exception, <span class=nv>tb</span><span class=o>=</span>exc_tb, <span class=nv>cause</span><span class=o>=</span>cause<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py&#34;</span>, line 2158, in _wrap_pool_connect
</span></span><span class=line><span class=cl>    <span class=k>return</span> fn<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 400, in connect
</span></span><span class=line><span class=cl>    <span class=k>return</span> _ConnectionFairy._checkout<span class=o>(</span>self<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 788, in _checkout
</span></span><span class=line><span class=cl>    <span class=nv>fairy</span> <span class=o>=</span> _ConnectionRecord.checkout<span class=o>(</span>pool<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 529, in checkout
</span></span><span class=line><span class=cl>    <span class=nv>rec</span> <span class=o>=</span> pool._do_get<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 1193, in _do_get
</span></span><span class=line><span class=cl>    self._dec_overflow<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/util/langhelpers.py&#34;</span>, line 66, in __exit__
</span></span><span class=line><span class=cl>    compat.reraise<span class=o>(</span>exc_type, exc_value, exc_tb<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 1190, in _do_get
</span></span><span class=line><span class=cl>    <span class=k>return</span> self._create_connection<span class=o>()</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 347, in _create_connection
</span></span><span class=line><span class=cl>    <span class=k>return</span> _ConnectionRecord<span class=o>(</span>self<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 474, in __init__
</span></span><span class=line><span class=cl>    self.__connect<span class=o>(</span><span class=nv>first_connect_check</span><span class=o>=</span>True<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/pool.py&#34;</span>, line 671, in __connect
</span></span><span class=line><span class=cl>    <span class=nv>connection</span> <span class=o>=</span> pool._invoke_creator<span class=o>(</span>self<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py&#34;</span>, line 106, in connect
</span></span><span class=line><span class=cl>    <span class=k>return</span> dialect.connect<span class=o>(</span>*cargs, **cparams<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/default.py&#34;</span>, line 412, in connect
</span></span><span class=line><span class=cl>    <span class=k>return</span> self.dbapi.connect<span class=o>(</span>*cargs, **cparams<span class=o>)</span>
</span></span><span class=line><span class=cl>  File <span class=s2>&#34;/usr/local/lib/python2.7/site-packages/psycopg2/__init__.py&#34;</span>, line 130, in connect
</span></span><span class=line><span class=cl>    <span class=nv>conn</span> <span class=o>=</span> _connect<span class=o>(</span>dsn, <span class=nv>connection_factory</span><span class=o>=</span>connection_factory, **kwasync<span class=o>)</span>
</span></span><span class=line><span class=cl>sqlalchemy.exc.OperationalError: <span class=o>(</span>psycopg2.OperationalError<span class=o>)</span> FATAL:  password authentication failed <span class=k>for</span> user <span class=s2>&#34;postgres&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>(</span>Background on this error at: http://sqlalche.me/e/e3q8<span class=o>)</span>
</span></span></code></pre></div><h2 id=解决办法-修改postgreshttpswwwpostgresqlorg数据库密码>解决办法, 修改<a href=https://www.postgresql.org/>Postgres</a>数据库密码</h2><p>进入<a href=https://www.docker.com/>docker</a> shell</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker <span class=nb>exec</span> -it redash_postgres_1 /bin/bash
</span></span></code></pre></div><p>切换用户</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>su postgres
</span></span></code></pre></div><p>进入<a href=https://hub.docker.com/_/postgres>postgres</a> shell</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>psql
</span></span></code></pre></div><p>修改密码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>postgres</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>PASSWORD</span><span class=w> </span><span class=s1>&#39;你的env密码&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>然后继续执行剩下命令即可</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker-compose run --rm server create_db
</span></span><span class=line><span class=cl>docker-compose up -d
</span></span></code></pre></div></div><div class=post_footer></div></div><div class=doc_comments><div class=comments_block_title>发表评论</div><div id=comments></div></div><style>.giscus,.giscus-frame{margin-bottom:48px}</style><script src=https://giscus.app/client.js data-repo=QCute/qcute.github.io data-repo-id=R_kgDOG-5qXQ data-category=Announcements data-category-id=DIC_kwDOG-5qXc4CSRb_ data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></div></div><a id=back_to_top href=# class=back_to_top><i class=ri-arrow-up-s-line></i></a><footer class=footer><div class=powered_by><a href=https://varkai.com>Designed by VarKai,</a>
<a href=http://www.gohugo.io/>Proudly published with Hugo</a></div><div class=footer_slogan><span>轻作、重拾写作的乐趣</span></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.1/elevator.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.32/fancybox/fancybox.umd.js></script><script src=/js/graphite.min.js></script><script>MathJax={options:{skipHtmlTags:["script","noscript","style","textarea","pre"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0}}</script><script type=text/javascript id=MathJax-script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js></script></body></html>